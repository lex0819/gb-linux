lex@gblex:~$ sudo apt install nginx
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  fontconfig-config fonts-dejavu-core libdeflate0 libfontconfig1
  libgd3 libjbig0 libjpeg-turbo8 libjpeg8 libmaxminddb0
  libnginx-mod-http-geoip2 libnginx-mod-http-image-filter
  libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream
  libnginx-mod-stream-geoip2 libtiff5 libwebp7 libxpm4 libxslt1.1
  nginx-common nginx-core
Suggested packages:
  libgd-tools mmdb-bin fcgiwrap nginx-doc ssl-cert
The following NEW packages will be installed:
  fontconfig-config fonts-dejavu-core libdeflate0 libfontconfig1
  libgd3 libjbig0 libjpeg-turbo8 libjpeg8 libmaxminddb0
  libnginx-mod-http-geoip2 libnginx-mod-http-image-filter
  libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream
  libnginx-mod-stream-geoip2 libtiff5 libwebp7 libxpm4 libxslt1.1
  nginx nginx-common nginx-core
0 upgraded, 22 newly installed, 0 to remove and 39 not upgraded.
Need to get 2858 kB of archives.
After this operation, 8406 kB of additional disk space will be used.
Do you want to continue? [Y/n] y
Get:1 http://ports.ubuntu.com/ubuntu-ports jammy/main arm64 libmaxminddb0 arm64 1.5.2-1build2 [24.9 kB]
Get:2 http://ports.ubuntu.com/ubuntu-ports jammy/main arm64 fonts-dejavu-core all 2.37-2build1 [1041 kB]
Get:3 http://ports.ubuntu.com/ubuntu-ports jammy/main arm64 fontconfig-config all 2.13.1-4.2ubuntu5 [29.1 kB]
Get:4 http://ports.ubuntu.com/ubuntu-ports jammy/main arm64 libdeflate0 arm64 1.10-2 [69.1 kB]
Get:5 http://ports.ubuntu.com/ubuntu-ports jammy/main arm64 libfontconfig1 arm64 2.13.1-4.2ubuntu5 [135 kB]
Get:6 http://ports.ubuntu.com/ubuntu-ports jammy/main arm64 libjpeg-turbo8 arm64 2.1.2-0ubuntu1 [129 kB]
Get:7 http://ports.ubuntu.com/ubuntu-ports jammy/main arm64 libjpeg8 arm64 8c-2ubuntu10 [2264 B]
Get:8 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libjbig0 arm64 2.1-3.1ubuntu0.22.04.1 [29.1 kB]
Get:9 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libwebp7 arm64 1.2.2-2ubuntu0.22.04.1 [193 kB]
Get:10 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libtiff5 arm64 4.3.0-6ubuntu0.4 [180 kB]
Get:11 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libxpm4 arm64 1:3.5.12-1ubuntu0.22.04.1 [35.3 kB]
Get:12 http://ports.ubuntu.com/ubuntu-ports jammy/main arm64 libgd3 arm64 2.3.0-2ubuntu2 [126 kB]
Get:13 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 nginx-common all 1.18.0-6ubuntu14.3 [40.0 kB]
Get:14 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libnginx-mod-http-geoip2 arm64 1.18.0-6ubuntu14.3 [11.6 kB]
Get:15 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libnginx-mod-http-image-filter arm64 1.18.0-6ubuntu14.3 [14.8 kB]
Get:16 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libxslt1.1 arm64 1.1.34-4ubuntu0.22.04.1 [160 kB]
Get:17 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libnginx-mod-http-xslt-filter arm64 1.18.0-6ubuntu14.3 [13.6 kB]
Get:18 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libnginx-mod-mail arm64 1.18.0-6ubuntu14.3 [45.0 kB]
Get:19 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libnginx-mod-stream arm64 1.18.0-6ubuntu14.3 [72.3 kB]
Get:20 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libnginx-mod-stream-geoip2 arm64 1.18.0-6ubuntu14.3 [9898 B]
Get:21 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 nginx-core arm64 1.18.0-6ubuntu14.3 [493 kB]
Get:22 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 nginx arm64 1.18.0-6ubuntu14.3 [3882 B]
Fetched 2858 kB in 4s (664 kB/s)
debconf: delaying package configuration, since apt-utils is not installed
Selecting previously unselected package libmaxminddb0:arm64.
(Reading database ... 66996 files and directories currently installed.)
Preparing to unpack .../00-libmaxminddb0_1.5.2-1build2_arm64.deb ...
Unpacking libmaxminddb0:arm64 (1.5.2-1build2) ...
Selecting previously unselected package fonts-dejavu-core.
Preparing to unpack .../01-fonts-dejavu-core_2.37-2build1_all.deb ...
Unpacking fonts-dejavu-core (2.37-2build1) ...
Selecting previously unselected package fontconfig-config.
Preparing to unpack .../02-fontconfig-config_2.13.1-4.2ubuntu5_all.deb ...
Unpacking fontconfig-config (2.13.1-4.2ubuntu5) ...
Selecting previously unselected package libdeflate0:arm64.
Preparing to unpack .../03-libdeflate0_1.10-2_arm64.deb ...
Unpacking libdeflate0:arm64 (1.10-2) ...
Selecting previously unselected package libfontconfig1:arm64.
Preparing to unpack .../04-libfontconfig1_2.13.1-4.2ubuntu5_arm64.deb ...
Unpacking libfontconfig1:arm64 (2.13.1-4.2ubuntu5) ...
Selecting previously unselected package libjpeg-turbo8:arm64.
Preparing to unpack .../05-libjpeg-turbo8_2.1.2-0ubuntu1_arm64.deb ...
Unpacking libjpeg-turbo8:arm64 (2.1.2-0ubuntu1) ...
Selecting previously unselected package libjpeg8:arm64.
Preparing to unpack .../06-libjpeg8_8c-2ubuntu10_arm64.deb ...
Unpacking libjpeg8:arm64 (8c-2ubuntu10) ...
Selecting previously unselected package libjbig0:arm64.
Preparing to unpack .../07-libjbig0_2.1-3.1ubuntu0.22.04.1_arm64.deb ...
Unpacking libjbig0:arm64 (2.1-3.1ubuntu0.22.04.1) ...
Selecting previously unselected package libwebp7:arm64.
Preparing to unpack .../08-libwebp7_1.2.2-2ubuntu0.22.04.1_arm64.deb ...
Unpacking libwebp7:arm64 (1.2.2-2ubuntu0.22.04.1) ...
Selecting previously unselected package libtiff5:arm64.
Preparing to unpack .../09-libtiff5_4.3.0-6ubuntu0.4_arm64.deb ...
Unpacking libtiff5:arm64 (4.3.0-6ubuntu0.4) ...
Selecting previously unselected package libxpm4:arm64.
Preparing to unpack .../10-libxpm4_1%3a3.5.12-1ubuntu0.22.04.1_arm64.deb ...
Unpacking libxpm4:arm64 (1:3.5.12-1ubuntu0.22.04.1) ...
Selecting previously unselected package libgd3:arm64.
Preparing to unpack .../11-libgd3_2.3.0-2ubuntu2_arm64.deb ...
Unpacking libgd3:arm64 (2.3.0-2ubuntu2) ...
Selecting previously unselected package nginx-common.
Preparing to unpack .../12-nginx-common_1.18.0-6ubuntu14.3_all.deb ...
Unpacking nginx-common (1.18.0-6ubuntu14.3) ...
Selecting previously unselected package libnginx-mod-http-geoip2.
Preparing to unpack .../13-libnginx-mod-http-geoip2_1.18.0-6ubuntu14.3_arm64.deb ...
Unpacking libnginx-mod-http-geoip2 (1.18.0-6ubuntu14.3) ...
Selecting previously unselected package libnginx-mod-http-image-filter.
Preparing to unpack .../14-libnginx-mod-http-image-filter_1.18.0-6ubuntu14.3_arm64.deb ...
Unpacking libnginx-mod-http-image-filter (1.18.0-6ubuntu14.3) ...
Selecting previously unselected package libxslt1.1:arm64.
Preparing to unpack .../15-libxslt1.1_1.1.34-4ubuntu0.22.04.1_arm64.deb ...
Unpacking libxslt1.1:arm64 (1.1.34-4ubuntu0.22.04.1) ...
Selecting previously unselected package libnginx-mod-http-xslt-filter.
Preparing to unpack .../16-libnginx-mod-http-xslt-filter_1.18.0-6ubuntu14.3_arm64.deb ...
Unpacking libnginx-mod-http-xslt-filter (1.18.0-6ubuntu14.3) ...
Selecting previously unselected package libnginx-mod-mail.
Preparing to unpack .../17-libnginx-mod-mail_1.18.0-6ubuntu14.3_arm64.deb ...
Unpacking libnginx-mod-mail (1.18.0-6ubuntu14.3) ...
Selecting previously unselected package libnginx-mod-stream.
Preparing to unpack .../18-libnginx-mod-stream_1.18.0-6ubuntu14.3_arm64.deb ...
Unpacking libnginx-mod-stream (1.18.0-6ubuntu14.3) ...
Selecting previously unselected package libnginx-mod-stream-geoip2.
Preparing to unpack .../19-libnginx-mod-stream-geoip2_1.18.0-6ubuntu14.3_arm64.deb ...
Unpacking libnginx-mod-stream-geoip2 (1.18.0-6ubuntu14.3) ...
Selecting previously unselected package nginx-core.
Preparing to unpack .../20-nginx-core_1.18.0-6ubuntu14.3_arm64.deb ...
Unpacking nginx-core (1.18.0-6ubuntu14.3) ...
Selecting previously unselected package nginx.
Preparing to unpack .../21-nginx_1.18.0-6ubuntu14.3_arm64.deb ...
Unpacking nginx (1.18.0-6ubuntu14.3) ...
Setting up libxpm4:arm64 (1:3.5.12-1ubuntu0.22.04.1) ...
Setting up libmaxminddb0:arm64 (1.5.2-1build2) ...
Setting up libdeflate0:arm64 (1.10-2) ...
Setting up nginx-common (1.18.0-6ubuntu14.3) ...
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline
Created symlink /etc/systemd/system/multi-user.target.wants/nginx.service → /lib/systemd/system/nginx.service.
Setting up libjbig0:arm64 (2.1-3.1ubuntu0.22.04.1) ...
Setting up fonts-dejavu-core (2.37-2build1) ...
Setting up libjpeg-turbo8:arm64 (2.1.2-0ubuntu1) ...
Setting up libwebp7:arm64 (1.2.2-2ubuntu0.22.04.1) ...
Setting up libxslt1.1:arm64 (1.1.34-4ubuntu0.22.04.1) ...
Setting up libnginx-mod-http-geoip2 (1.18.0-6ubuntu14.3) ...
Setting up libjpeg8:arm64 (8c-2ubuntu10) ...
Setting up libnginx-mod-mail (1.18.0-6ubuntu14.3) ...
Setting up fontconfig-config (2.13.1-4.2ubuntu5) ...
Setting up libnginx-mod-stream (1.18.0-6ubuntu14.3) ...
Setting up libnginx-mod-http-xslt-filter (1.18.0-6ubuntu14.3) ...
Setting up libtiff5:arm64 (4.3.0-6ubuntu0.4) ...
Setting up libfontconfig1:arm64 (2.13.1-4.2ubuntu5) ...
Setting up libnginx-mod-stream-geoip2 (1.18.0-6ubuntu14.3) ...
Setting up libgd3:arm64 (2.3.0-2ubuntu2) ...
Setting up libnginx-mod-http-image-filter (1.18.0-6ubuntu14.3) ...
Setting up nginx-core (1.18.0-6ubuntu14.3) ...
 * Upgrading binary nginx                                        [ OK ]
Setting up nginx (1.18.0-6ubuntu14.3) ...
Processing triggers for libc-bin (2.35-0ubuntu3.1) ...
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline
Scanning processes...
Scanning linux images...

Running kernel seems to be up-to-date.

No services need to be restarted.

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this
 host.
lex@gblex:~$
lex@gblex:~$ ps afx | grep nginx
   2187 pts/0    S+     0:00              \_ grep --color=auto nginx
   2100 ?        S      0:00 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;
   2102 ?        S      0:00  \_ nginx: worker process
   2103 ?        S      0:00  \_ nginx: worker process
   2104 ?        S      0:00  \_ nginx: worker process
   2105 ?        S      0:00  \_ nginx: worker process
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ ss -ntlp
State   Recv-Q  Send-Q   Local Address:Port   Peer Address:Port Process
LISTEN  0       511            0.0.0.0:80          0.0.0.0:*
LISTEN  0       4096     127.0.0.53%lo:53          0.0.0.0:*
LISTEN  0       128            0.0.0.0:22          0.0.0.0:*
LISTEN  0       511               [::]:80             [::]:*
LISTEN  0       128               [::]:22             [::]:*
lex@gblex:~$
lex@gblex:~$ ss -tulpan
Netid  State   Recv-Q  Send-Q                       Local Address:Port                  Peer Address:Port                Process
udp    UNCONN  0       0                            127.0.0.53%lo:53                         0.0.0.0:*
udp    UNCONN  0       0                     192.168.1.100%ens160:68                         0.0.0.0:*
udp    UNCONN  0       0        [fe80::20c:29ff:fe91:9cd3]%ens160:546                           [::]:*
tcp    LISTEN  0       511                                0.0.0.0:80                         0.0.0.0:*
tcp    LISTEN  0       4096                         127.0.0.53%lo:53                         0.0.0.0:*
tcp    LISTEN  0       128                                0.0.0.0:22                         0.0.0.0:*
tcp    ESTAB   0       0                            192.168.1.100:22                    192.168.1.93:58054
tcp    LISTEN  0       511                                   [::]:80                            [::]:*
tcp    LISTEN  0       128                                   [::]:22                            [::]:*
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: ens160: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 00:0c:29:91:9c:d3 brd ff:ff:ff:ff:ff:ff
    altname enp2s0
    inet 192.168.1.100/24 metric 100 brd 192.168.1.255 scope global dynamic ens160
       valid_lft 23105sec preferred_lft 23105sec
    inet6 2a02:2168:80ba:7800:20c:29ff:fe91:9cd3/64 scope global dynamic mngtmpaddr noprefixroute
       valid_lft 1343sec preferred_lft 1343sec
    inet6 fe80::20c:29ff:fe91:9cd3/64 scope link
       valid_lft forever preferred_lft forever
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ ls -l /etc/nginx
total 64
drwxr-xr-x 2 root root 4096 Nov 10  2022 conf.d
-rw-r--r-- 1 root root 1125 Jul 27  2022 fastcgi.conf
-rw-r--r-- 1 root root 1055 Jul 27  2022 fastcgi_params
-rw-r--r-- 1 root root 2837 Jul 27  2022 koi-utf
-rw-r--r-- 1 root root 2223 Jul 27  2022 koi-win
-rw-r--r-- 1 root root 3957 Aug  2  2022 mime.types
drwxr-xr-x 2 root root 4096 Nov 10  2022 modules-available
drwxr-xr-x 2 root root 4096 Jun 20 04:28 modules-enabled
-rw-r--r-- 1 root root 1447 Jul 27  2022 nginx.conf
-rw-r--r-- 1 root root  180 Jul 27  2022 proxy_params
-rw-r--r-- 1 root root  636 Jul 27  2022 scgi_params
drwxr-xr-x 2 root root 4096 Jun 20 04:28 sites-available
drwxr-xr-x 2 root root 4096 Jun 20 04:28 sites-enabled
drwxr-xr-x 2 root root 4096 Jun 20 04:28 snippets
-rw-r--r-- 1 root root  664 Jul 27  2022 uwsgi_params
-rw-r--r-- 1 root root 3071 Jul 27  2022 win-utf
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ cat /etc/nginx/sites-available/default
##
# You should look at the following URL's in order to grasp a solid understanding
# of Nginx configuration files in order to fully unleash the power of Nginx.
# https://www.nginx.com/resources/wiki/start/
# https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/
# https://wiki.debian.org/Nginx/DirectoryStructure
#
# In most cases, administrators will remove this file from sites-enabled/ and
# leave it as reference inside of sites-available where it will continue to be
# updated by the nginx packaging team.
#
# This file will automatically load configuration files provided by other
# applications, such as Drupal or Wordpress. These applications will be made
# available underneath a path with that package name, such as /drupal8.
#
# Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.
##

# Default server configuration
#
server {
	listen 80 default_server;
	listen [::]:80 default_server;

	# SSL configuration
	#
	# listen 443 ssl default_server;
	# listen [::]:443 ssl default_server;
	#
	# Note: You should disable gzip for SSL traffic.
	# See: https://bugs.debian.org/773332
	#
	# Read up on ssl_ciphers to ensure a secure configuration.
	# See: https://bugs.debian.org/765782
	#
	# Self signed certs generated by the ssl-cert package
	# Don't use them in a production server!
	#
	# include snippets/snakeoil.conf;

	root /var/www/html;

	# Add index.php to the list if you are using PHP
	index index.html index.htm index.nginx-debian.html;

	server_name _;

	location / {
		# First attempt to serve request as file, then
		# as directory, then fall back to displaying a 404.
		try_files $uri $uri/ =404;
	}

	# pass PHP scripts to FastCGI server
	#
	#location ~ \.php$ {
	#	include snippets/fastcgi-php.conf;
	#
	#	# With php-fpm (or other unix sockets):
	#	fastcgi_pass unix:/run/php/php7.4-fpm.sock;
	#	# With php-cgi (or other tcp sockets):
	#	fastcgi_pass 127.0.0.1:9000;
	#}

	# deny access to .htaccess files, if Apache's document root
	# concurs with nginx's one
	#
	#location ~ /\.ht {
	#	deny all;
	#}
}


# Virtual Host configuration for example.com
#
# You can move that to a different file under sites-available/ and symlink that
# to sites-enabled/ to enable it.
#
#server {
#	listen 80;
#	listen [::]:80;
#
#	server_name example.com;
#
#	root /var/www/example.com;
#	index index.html;
#
#	location / {
#		try_files $uri $uri/ =404;
#	}
#}
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ ls -l /var
total 48
drwxr-xr-x  2 root root  4096 Apr 18  2022 backups
drwxr-xr-x 10 root root  4096 Feb 17 17:27 cache
drwxrwxrwt  2 root root  4096 Feb 17 17:27 crash
drwxr-xr-x 27 root root  4096 Jun 20 04:28 lib
drwxrwsr-x  2 root staff 4096 Apr 18  2022 local
lrwxrwxrwx  1 root root     9 Feb 17 17:22 lock -> /run/lock
drwxr-xr-x  9 root root  4096 Jun 20 04:28 log
drwxrwsr-x  2 root mail  4096 Feb 17 17:22 mail
drwxr-xr-x  2 root root  4096 Feb 17 17:22 opt
lrwxrwxrwx  1 root root     4 Feb 17 17:22 run -> /run
drwxr-xr-x  2 root root  4096 Dec  1  2022 snap
drwxr-xr-x  2 root root  4096 Feb 17 17:22 spool
drwxrwxrwt  5 root root  4096 Jun 20 04:05 tmp
drwxr-xr-x  3 root root  4096 Jun 20 04:28 www
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ ls -l /var/www
total 4
drwxr-xr-x 2 root root 4096 Jun 20 04:28 html
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ sudo apt install php
[sudo] password for lex:
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  apache2 apache2-bin apache2-data apache2-utils libapache2-mod-php8.1 libapr1 libaprutil1 libaprutil1-dbd-sqlite3
  libaprutil1-ldap libjansson4 liblua5.3-0 libsodium23 php-common php8.1 php8.1-cli php8.1-common php8.1-opcache
  php8.1-readline psmisc ssl-cert
Suggested packages:
  apache2-doc apache2-suexec-pristine | apache2-suexec-custom www-browser ufw php-pear
The following NEW packages will be installed:
  apache2 apache2-bin apache2-data apache2-utils libapache2-mod-php8.1 libapr1 libaprutil1 libaprutil1-dbd-sqlite3
  libaprutil1-ldap libjansson4 liblua5.3-0 libsodium23 php php-common php8.1 php8.1-cli php8.1-common
  php8.1-opcache php8.1-readline psmisc ssl-cert
0 upgraded, 21 newly installed, 0 to remove and 39 not upgraded.
Need to get 7502 kB of archives.
After this operation, 30.3 MB of additional disk space will be used.
Do you want to continue? [Y/n] y
Get:1 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libapr1 arm64 1.7.0-8ubuntu0.22.04.1 [106 kB]
Get:2 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libaprutil1 arm64 1.6.1-5ubuntu4.22.04.1 [93.5 kB]
Get:3 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libaprutil1-dbd-sqlite3 arm64 1.6.1-5ubuntu4.22.04.1 [11.2 kB]
Get:4 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libaprutil1-ldap arm64 1.6.1-5ubuntu4.22.04.1 [9052 B]
Get:5 http://ports.ubuntu.com/ubuntu-ports jammy/main arm64 libjansson4 arm64 2.13.1-1.1build3 [33.6 kB]
Get:6 http://ports.ubuntu.com/ubuntu-ports jammy/main arm64 liblua5.3-0 arm64 5.3.6-1build1 [135 kB]
Get:7 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 apache2-bin arm64 2.4.52-1ubuntu4.5 [1301 kB]
Get:8 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 apache2-data all 2.4.52-1ubuntu4.5 [165 kB]
Get:9 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 apache2-utils arm64 2.4.52-1ubuntu4.5 [87.7 kB]
Get:10 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 apache2 arm64 2.4.52-1ubuntu4.5 [97.8 kB]
Get:11 http://ports.ubuntu.com/ubuntu-ports jammy/main arm64 psmisc arm64 23.4-2build3 [118 kB]
Get:12 http://ports.ubuntu.com/ubuntu-ports jammy/main arm64 php-common all 2:92ubuntu1 [12.4 kB]
Get:13 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 php8.1-common arm64 8.1.2-1ubuntu2.11 [1123 kB]
Get:14 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 php8.1-opcache arm64 8.1.2-1ubuntu2.11 [576 kB]
Get:15 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 php8.1-readline arm64 8.1.2-1ubuntu2.11 [13.0 kB]
Get:16 http://ports.ubuntu.com/ubuntu-ports jammy/main arm64 libsodium23 arm64 1.0.18-1build2 [123 kB]
Get:17 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 php8.1-cli arm64 8.1.2-1ubuntu2.11 [1769 kB]
Get:18 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 libapache2-mod-php8.1 arm64 8.1.2-1ubuntu2.11 [1699 kB]
Get:19 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main arm64 php8.1 all 8.1.2-1ubuntu2.11 [9150 B]
Get:20 http://ports.ubuntu.com/ubuntu-ports jammy/main arm64 php all 2:8.1+92ubuntu1 [2756 B]
Get:21 http://ports.ubuntu.com/ubuntu-ports jammy/main arm64 ssl-cert all 1.1.2 [17.4 kB]
Fetched 7502 kB in 4s (1796 kB/s)
debconf: delaying package configuration, since apt-utils is not installed
Selecting previously unselected package libapr1:arm64.
(Reading database ... 67259 files and directories currently installed.)
Preparing to unpack .../00-libapr1_1.7.0-8ubuntu0.22.04.1_arm64.deb ...
Unpacking libapr1:arm64 (1.7.0-8ubuntu0.22.04.1) ...
Selecting previously unselected package libaprutil1:arm64.
Preparing to unpack .../01-libaprutil1_1.6.1-5ubuntu4.22.04.1_arm64.deb ...
Unpacking libaprutil1:arm64 (1.6.1-5ubuntu4.22.04.1) ...
Selecting previously unselected package libaprutil1-dbd-sqlite3:arm64.
Preparing to unpack .../02-libaprutil1-dbd-sqlite3_1.6.1-5ubuntu4.22.04.1_arm64.deb ...
Unpacking libaprutil1-dbd-sqlite3:arm64 (1.6.1-5ubuntu4.22.04.1) ...
Selecting previously unselected package libaprutil1-ldap:arm64.
Preparing to unpack .../03-libaprutil1-ldap_1.6.1-5ubuntu4.22.04.1_arm64.deb ...
Unpacking libaprutil1-ldap:arm64 (1.6.1-5ubuntu4.22.04.1) ...
Selecting previously unselected package libjansson4:arm64.
Preparing to unpack .../04-libjansson4_2.13.1-1.1build3_arm64.deb ...
Unpacking libjansson4:arm64 (2.13.1-1.1build3) ...
Selecting previously unselected package liblua5.3-0:arm64.
Preparing to unpack .../05-liblua5.3-0_5.3.6-1build1_arm64.deb ...
Unpacking liblua5.3-0:arm64 (5.3.6-1build1) ...
Selecting previously unselected package apache2-bin.
Preparing to unpack .../06-apache2-bin_2.4.52-1ubuntu4.5_arm64.deb ...
Unpacking apache2-bin (2.4.52-1ubuntu4.5) ...
Selecting previously unselected package apache2-data.
Preparing to unpack .../07-apache2-data_2.4.52-1ubuntu4.5_all.deb ...
Unpacking apache2-data (2.4.52-1ubuntu4.5) ...
Selecting previously unselected package apache2-utils.
Preparing to unpack .../08-apache2-utils_2.4.52-1ubuntu4.5_arm64.deb ...
Unpacking apache2-utils (2.4.52-1ubuntu4.5) ...
Selecting previously unselected package apache2.
Preparing to unpack .../09-apache2_2.4.52-1ubuntu4.5_arm64.deb ...
Unpacking apache2 (2.4.52-1ubuntu4.5) ...
Selecting previously unselected package psmisc.
Preparing to unpack .../10-psmisc_23.4-2build3_arm64.deb ...
Unpacking psmisc (23.4-2build3) ...
Selecting previously unselected package php-common.
Preparing to unpack .../11-php-common_2%3a92ubuntu1_all.deb ...
Unpacking php-common (2:92ubuntu1) ...
Selecting previously unselected package php8.1-common.
Preparing to unpack .../12-php8.1-common_8.1.2-1ubuntu2.11_arm64.deb ...
Unpacking php8.1-common (8.1.2-1ubuntu2.11) ...
Selecting previously unselected package php8.1-opcache.
Preparing to unpack .../13-php8.1-opcache_8.1.2-1ubuntu2.11_arm64.deb ...
Unpacking php8.1-opcache (8.1.2-1ubuntu2.11) ...
Selecting previously unselected package php8.1-readline.
Preparing to unpack .../14-php8.1-readline_8.1.2-1ubuntu2.11_arm64.deb ...
Unpacking php8.1-readline (8.1.2-1ubuntu2.11) ...
Selecting previously unselected package libsodium23:arm64.
Preparing to unpack .../15-libsodium23_1.0.18-1build2_arm64.deb ...
Unpacking libsodium23:arm64 (1.0.18-1build2) ...
Selecting previously unselected package php8.1-cli.
Preparing to unpack .../16-php8.1-cli_8.1.2-1ubuntu2.11_arm64.deb ...
Unpacking php8.1-cli (8.1.2-1ubuntu2.11) ...
Selecting previously unselected package libapache2-mod-php8.1.
Preparing to unpack .../17-libapache2-mod-php8.1_8.1.2-1ubuntu2.11_arm64.deb ...
Unpacking libapache2-mod-php8.1 (8.1.2-1ubuntu2.11) ...
Selecting previously unselected package php8.1.
Preparing to unpack .../18-php8.1_8.1.2-1ubuntu2.11_all.deb ...
Unpacking php8.1 (8.1.2-1ubuntu2.11) ...
Selecting previously unselected package php.
Preparing to unpack .../19-php_2%3a8.1+92ubuntu1_all.deb ...
Unpacking php (2:8.1+92ubuntu1) ...
Selecting previously unselected package ssl-cert.
Preparing to unpack .../20-ssl-cert_1.1.2_all.deb ...
Unpacking ssl-cert (1.1.2) ...
Setting up libsodium23:arm64 (1.0.18-1build2) ...
Setting up psmisc (23.4-2build3) ...
Setting up libapr1:arm64 (1.7.0-8ubuntu0.22.04.1) ...
Setting up libjansson4:arm64 (2.13.1-1.1build3) ...
Setting up ssl-cert (1.1.2) ...
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline
Setting up liblua5.3-0:arm64 (5.3.6-1build1) ...
Setting up apache2-data (2.4.52-1ubuntu4.5) ...
Setting up libaprutil1:arm64 (1.6.1-5ubuntu4.22.04.1) ...
Setting up php-common (2:92ubuntu1) ...
Created symlink /etc/systemd/system/timers.target.wants/phpsessionclean.timer → /lib/systemd/system/phpsessionclean.timer.
Setting up php8.1-common (8.1.2-1ubuntu2.11) ...
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/calendar.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/ctype.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/exif.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/fileinfo.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/ffi.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/ftp.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/gettext.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/iconv.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/pdo.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/phar.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/posix.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/shmop.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/sockets.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/sysvmsg.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/sysvsem.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/sysvshm.ini with new version
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/tokenizer.ini with new version
Setting up libaprutil1-ldap:arm64 (1.6.1-5ubuntu4.22.04.1) ...
Setting up libaprutil1-dbd-sqlite3:arm64 (1.6.1-5ubuntu4.22.04.1) ...
Setting up php8.1-readline (8.1.2-1ubuntu2.11) ...
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/readline.ini with new version
Setting up php8.1-opcache (8.1.2-1ubuntu2.11) ...
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/mods-available/opcache.ini with new version
Setting up apache2-utils (2.4.52-1ubuntu4.5) ...
Setting up apache2-bin (2.4.52-1ubuntu4.5) ...
Setting up php8.1-cli (8.1.2-1ubuntu2.11) ...
update-alternatives: using /usr/bin/php8.1 to provide /usr/bin/php (php) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/php.1.gz because associated file /usr/share/man/man1/php8.1.1.gz (of link group php) doesn't exist
update-alternatives: using /usr/bin/phar8.1 to provide /usr/bin/phar (phar) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/phar.1.gz because associated file /usr/share/man/man1/phar8.1.1.gz (of link group phar) doesn't exist
update-alternatives: using /usr/bin/phar.phar8.1 to provide /usr/bin/phar.phar (phar.phar) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/phar.phar.1.gz because associated file /usr/share/man/man1/phar.phar8.1.1.gz (of link group phar.phar) doesn't exist
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/cli/php.ini with new version
Setting up libapache2-mod-php8.1 (8.1.2-1ubuntu2.11) ...
Package apache2 is not configured yet. Will defer actions by package libapache2-mod-php8.1.
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/apache2/php.ini with new version
No module matches
Setting up apache2 (2.4.52-1ubuntu4.5) ...
Enabling module mpm_event.
Enabling module authz_core.
Enabling module authz_host.
Enabling module authn_core.
Enabling module auth_basic.
Enabling module access_compat.
Enabling module authn_file.
Enabling module authz_user.
Enabling module alias.
Enabling module dir.
Enabling module autoindex.
Enabling module env.
Enabling module mime.
Enabling module negotiation.
Enabling module setenvif.
Enabling module filter.
Enabling module deflate.
Enabling module status.
Enabling module reqtimeout.
Enabling conf charset.
Enabling conf localized-error-pages.
Enabling conf other-vhosts-access-log.
Enabling conf security.
Enabling conf serve-cgi-bin.
Enabling site 000-default.
info: Switch to mpm prefork for package libapache2-mod-php8.1
Module mpm_event disabled.
Enabling module mpm_prefork.
info: Executing deferred 'a2enmod php8.1' for package libapache2-mod-php8.1
Enabling module php8.1.
Created symlink /etc/systemd/system/multi-user.target.wants/apache2.service → /lib/systemd/system/apache2.service.
Could not execute systemctl:  at /usr/bin/deb-systemd-invoke line 142.
Created symlink /etc/systemd/system/multi-user.target.wants/apache-htcacheclean.service → /lib/systemd/system/apache-htcacheclean.service.
Setting up php8.1 (8.1.2-1ubuntu2.11) ...
Setting up php (2:8.1+92ubuntu1) ...
Processing triggers for libc-bin (2.35-0ubuntu3.1) ...
Processing triggers for php8.1-cli (8.1.2-1ubuntu2.11) ...
Processing triggers for libapache2-mod-php8.1 (8.1.2-1ubuntu2.11) ...
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline
Scanning processes...
Scanning linux images...

Running kernel seems to be up-to-date.

No services need to be restarted.

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ php -v
PHP 8.1.2-1ubuntu2.11 (cli) (built: Feb 22 2023 22:56:18) (NTS)
Copyright (c) The PHP Group
Zend Engine v4.1.2, Copyright (c) Zend Technologies
    with Zend OPcache v8.1.2-1ubuntu2.11, Copyright (c), by Zend Technologies
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ sudo apt install php8.1-fpm
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
Suggested packages:
  php-pear
The following NEW packages will be installed:
  php8.1-fpm
0 upgraded, 1 newly installed, 0 to remove and 39 not upgraded.
Need to get 1777 kB of archives.
After this operation, 5466 kB of additional disk space will be used.
Get:1 http://ports.ubuntu.com/ubuntu-ports jammy-updates/universe arm64 php8.1-fpm arm64 8.1.2-1ubuntu2.11 [1777 kB]
Fetched 1777 kB in 2s (872 kB/s)
debconf: delaying package configuration, since apt-utils is not installed
Selecting previously unselected package php8.1-fpm.
(Reading database ... 68172 files and directories currently installed.)
Preparing to unpack .../php8.1-fpm_8.1.2-1ubuntu2.11_arm64.deb ...
Unpacking php8.1-fpm (8.1.2-1ubuntu2.11) ...
Setting up php8.1-fpm (8.1.2-1ubuntu2.11) ...
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline

Creating config file /etc/php/8.1/fpm/php.ini with new version
NOTICE: Not enabling PHP 8.1 FPM by default.
NOTICE: To enable PHP 8.1 FPM in Apache2 do:
NOTICE: a2enmod proxy_fcgi setenvif
NOTICE: a2enconf php8.1-fpm
NOTICE: You are seeing this message because you have apache2 package installed.
Created symlink /etc/systemd/system/multi-user.target.wants/php8.1-fpm.service → /lib/systemd/system/php8.1-fpm.service.
Processing triggers for php8.1-fpm (8.1.2-1ubuntu2.11) ...
NOTICE: Not enabling PHP 8.1 FPM by default.
NOTICE: To enable PHP 8.1 FPM in Apache2 do:
NOTICE: a2enmod proxy_fcgi setenvif
NOTICE: a2enconf php8.1-fpm
NOTICE: You are seeing this message because you have apache2 package installed.
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline
Scanning processes...
Scanning linux images...

Running kernel seems to be up-to-date.

No services need to be restarted.

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ ps afx
    PID TTY      STAT   TIME COMMAND
      2 ?        S      0:00 [kthreadd]
    ...
   1274 ?        Ssl    0:00 /usr/libexec/packagekitd
   1278 ?        Ssl    0:00 /usr/libexec/polkitd --no-debug
   2100 ?        S      0:00 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;
   2102 ?        S      0:00  \_ nginx: worker process
   2103 ?        S      0:00  \_ nginx: worker process
   2104 ?        S      0:00  \_ nginx: worker process
   2105 ?        S      0:00  \_ nginx: worker process
   9124 ?        Ss     0:00 /usr/bin/htcacheclean -d 120 -p /var/cache/apache2/mod_cache_disk -l 300M -n
  10402 ?        Ss     0:00 php-fpm: master process (/etc/php/8.1/fpm/php-fpm.conf)
  10403 ?        S      0:00  \_ php-fpm: pool www
  10404 ?        S      0:00  \_ php-fpm: pool www
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ ls -l /etc/php/8.1
total 16
drwxr-xr-x 3 root root 4096 Jun 20 05:38 apache2
drwxr-xr-x 3 root root 4096 Jun 20 05:38 cli
drwxr-xr-x 4 root root 4096 Jun 20 05:41 fpm
drwxr-xr-x 2 root root 4096 Jun 20 05:38 mods-available
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ ls -l /etc/php/8.1/fpm
total 88
drwxr-xr-x 2 root root  4096 Jun 20 05:41 conf.d
-rw-r--r-- 1 root root  5457 Feb 22 22:56 php-fpm.conf
-rw-r--r-- 1 root root 72928 Feb 22 22:56 php.ini
drwxr-xr-x 2 root root  4096 Jun 20 05:41 pool.d
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ ls -l /etc/php/8.1/fpm/pool.d
total 24
-rw-r--r-- 1 root root 20876 Feb 22 22:56 www.conf
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ ls -l /etc/php/8.1/fpm/pool.d/www.conf
-rw-r--r-- 1 root root 20876 Feb 22 22:56 /etc/php/8.1/fpm/pool.d/www.conf
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ cat /etc/php/8.1/fpm/pool.d/www.conf
; Start a new pool named 'www'.
; the variable $pool can be used in any directive and will be replaced by the
; pool name ('www' here)
[www]

; Per pool prefix
; It only applies on the following directives:
; - 'access.log'
; - 'slowlog'
; - 'listen' (unixsocket)
; - 'chroot'
; - 'chdir'
; - 'php_values'
; - 'php_admin_values'
; When not set, the global prefix (or /usr) applies instead.
; Note: This directive can also be relative to the global prefix.
; Default Value: none
;prefix = /path/to/pools/$pool

; Unix user/group of processes
; Note: The user is mandatory. If the group is not set, the default user's group
;       will be used.
user = www-data
group = www-data

; The address on which to accept FastCGI requests.
; Valid syntaxes are:
;   'ip.add.re.ss:port'    - to listen on a TCP socket to a specific IPv4 address on
;                            a specific port;
;   '[ip:6:addr:ess]:port' - to listen on a TCP socket to a specific IPv6 address on
;                            a specific port;
;   'port'                 - to listen on a TCP socket to all addresses
;                            (IPv6 and IPv4-mapped) on a specific port;
;   '/path/to/unix/socket' - to listen on a unix socket.
; Note: This value is mandatory.
listen = /run/php/php8.1-fpm.sock

; Set listen(2) backlog.
; Default Value: 511 (-1 on FreeBSD and OpenBSD)
;listen.backlog = 511

; Set permissions for unix socket, if one is used. In Linux, read/write
; permissions must be set in order to allow connections from a web server. Many
; BSD-derived systems allow connections regardless of permissions. The owner
; and group can be specified either by name or by their numeric IDs.
; Default Values: user and group are set as the running user
;                 mode is set to 0660
listen.owner = www-data
listen.group = www-data
;listen.mode = 0660
; When POSIX Access Control Lists are supported you can set them using
; these options, value is a comma separated list of user/group names.
; When set, listen.owner and listen.group are ignored
;listen.acl_users =
;listen.acl_groups =

; List of addresses (IPv4/IPv6) of FastCGI clients which are allowed to connect.
; Equivalent to the FCGI_WEB_SERVER_ADDRS environment variable in the original
; PHP FCGI (5.2.2+). Makes sense only with a tcp listening socket. Each address
; must be separated by a comma. If this value is left blank, connections will be
; accepted from any ip address.
; Default Value: any
;listen.allowed_clients = 127.0.0.1

; Specify the nice(2) priority to apply to the pool processes (only if set)
; The value can vary from -19 (highest priority) to 20 (lower priority)
; Note: - It will only work if the FPM master process is launched as root
;       - The pool processes will inherit the master process priority
;         unless it specified otherwise
; Default Value: no set
; process.priority = -19

; Set the process dumpable flag (PR_SET_DUMPABLE prctl) even if the process user
; or group is different than the master process user. It allows to create process
; core dump and ptrace the process for the pool user.
; Default Value: no
; process.dumpable = yes

; Choose how the process manager will control the number of child processes.
; Possible Values:
;   static  - a fixed number (pm.max_children) of child processes;
;   dynamic - the number of child processes are set dynamically based on the
;             following directives. With this process management, there will be
;             always at least 1 children.
;             pm.max_children      - the maximum number of children that can
;                                    be alive at the same time.
;             pm.start_servers     - the number of children created on startup.
;             pm.min_spare_servers - the minimum number of children in 'idle'
;                                    state (waiting to process). If the number
;                                    of 'idle' processes is less than this
;                                    number then some children will be created.
;             pm.max_spare_servers - the maximum number of children in 'idle'
;                                    state (waiting to process). If the number
;                                    of 'idle' processes is greater than this
;                                    number then some children will be killed.
;             pm.max_spawn_rate    - the maximum number of rate to spawn child
;                                    processes at once.
;  ondemand - no children are created at startup. Children will be forked when
;             new requests will connect. The following parameter are used:
;             pm.max_children           - the maximum number of children that
;                                         can be alive at the same time.
;             pm.process_idle_timeout   - The number of seconds after which
;                                         an idle process will be killed.
; Note: This value is mandatory.
pm = dynamic

; The number of child processes to be created when pm is set to 'static' and the
; maximum number of child processes when pm is set to 'dynamic' or 'ondemand'.
; This value sets the limit on the number of simultaneous requests that will be
; served. Equivalent to the ApacheMaxClients directive with mpm_prefork.
; Equivalent to the PHP_FCGI_CHILDREN environment variable in the original PHP
; CGI. The below defaults are based on a server without much resources. Don't
; forget to tweak pm.* to fit your needs.
; Note: Used when pm is set to 'static', 'dynamic' or 'ondemand'
; Note: This value is mandatory.
pm.max_children = 5

; The number of child processes created on startup.
; Note: Used only when pm is set to 'dynamic'
; Default Value: (min_spare_servers + max_spare_servers) / 2
pm.start_servers = 2

; The desired minimum number of idle server processes.
; Note: Used only when pm is set to 'dynamic'
; Note: Mandatory when pm is set to 'dynamic'
pm.min_spare_servers = 1

; The desired maximum number of idle server processes.
; Note: Used only when pm is set to 'dynamic'
; Note: Mandatory when pm is set to 'dynamic'
pm.max_spare_servers = 3

; The number of rate to spawn child processes at once.
; Note: Used only when pm is set to 'dynamic'
; Note: Mandatory when pm is set to 'dynamic'
; Default Value: 32
;pm.max_spawn_rate = 32

; The number of seconds after which an idle process will be killed.
; Note: Used only when pm is set to 'ondemand'
; Default Value: 10s
;pm.process_idle_timeout = 10s;

; The number of requests each child process should execute before respawning.
; This can be useful to work around memory leaks in 3rd party libraries. For
; endless request processing specify '0'. Equivalent to PHP_FCGI_MAX_REQUESTS.
; Default Value: 0
;pm.max_requests = 500

; The URI to view the FPM status page. If this value is not set, no URI will be
; recognized as a status page. It shows the following information:
;   pool                 - the name of the pool;
;   process manager      - static, dynamic or ondemand;
;   start time           - the date and time FPM has started;
;   start since          - number of seconds since FPM has started;
;   accepted conn        - the number of request accepted by the pool;
;   listen queue         - the number of request in the queue of pending
;                          connections (see backlog in listen(2));
;   max listen queue     - the maximum number of requests in the queue
;                          of pending connections since FPM has started;
;   listen queue len     - the size of the socket queue of pending connections;
;   idle processes       - the number of idle processes;
;   active processes     - the number of active processes;
;   total processes      - the number of idle + active processes;
;   max active processes - the maximum number of active processes since FPM
;                          has started;
;   max children reached - number of times, the process limit has been reached,
;                          when pm tries to start more children (works only for
;                          pm 'dynamic' and 'ondemand');
; Value are updated in real time.
; Example output:
;   pool:                 www
;   process manager:      static
;   start time:           01/Jul/2011:17:53:49 +0200
;   start since:          62636
;   accepted conn:        190460
;   listen queue:         0
;   max listen queue:     1
;   listen queue len:     42
;   idle processes:       4
;   active processes:     11
;   total processes:      15
;   max active processes: 12
;   max children reached: 0
;
; By default the status page output is formatted as text/plain. Passing either
; 'html', 'xml' or 'json' in the query string will return the corresponding
; output syntax. Example:
;   http://www.foo.bar/status
;   http://www.foo.bar/status?json
;   http://www.foo.bar/status?html
;   http://www.foo.bar/status?xml
;
; By default the status page only outputs short status. Passing 'full' in the
; query string will also return status for each pool process.
; Example:
;   http://www.foo.bar/status?full
;   http://www.foo.bar/status?json&full
;   http://www.foo.bar/status?html&full
;   http://www.foo.bar/status?xml&full
; The Full status returns for each process:
;   pid                  - the PID of the process;
;   state                - the state of the process (Idle, Running, ...);
;   start time           - the date and time the process has started;
;   start since          - the number of seconds since the process has started;
;   requests             - the number of requests the process has served;
;   request duration     - the duration in µs of the requests;
;   request method       - the request method (GET, POST, ...);
;   request URI          - the request URI with the query string;
;   content length       - the content length of the request (only with POST);
;   user                 - the user (PHP_AUTH_USER) (or '-' if not set);
;   script               - the main script called (or '-' if not set);
;   last request cpu     - the %cpu the last request consumed
;                          it's always 0 if the process is not in Idle state
;                          because CPU calculation is done when the request
;                          processing has terminated;
;   last request memory  - the max amount of memory the last request consumed
;                          it's always 0 if the process is not in Idle state
;                          because memory calculation is done when the request
;                          processing has terminated;
; If the process is in Idle state, then informations are related to the
; last request the process has served. Otherwise informations are related to
; the current request being served.
; Example output:
;   ************************
;   pid:                  31330
;   state:                Running
;   start time:           01/Jul/2011:17:53:49 +0200
;   start since:          63087
;   requests:             12808
;   request duration:     1250261
;   request method:       GET
;   request URI:          /test_mem.php?N=10000
;   content length:       0
;   user:                 -
;   script:               /home/fat/web/docs/php/test_mem.php
;   last request cpu:     0.00
;   last request memory:  0
;
; Note: There is a real-time FPM status monitoring sample web page available
;       It's available in: /usr/share/php/8.1/fpm/status.html
;
; Note: The value must start with a leading slash (/). The value can be
;       anything, but it may not be a good idea to use the .php extension or it
;       may conflict with a real PHP file.
; Default Value: not set
;pm.status_path = /status

; The address on which to accept FastCGI status request. This creates a new
; invisible pool that can handle requests independently. This is useful
; if the main pool is busy with long running requests because it is still possible
; to get the status before finishing the long running requests.
;
; Valid syntaxes are:
;   'ip.add.re.ss:port'    - to listen on a TCP socket to a specific IPv4 address on
;                            a specific port;
;   '[ip:6:addr:ess]:port' - to listen on a TCP socket to a specific IPv6 address on
;                            a specific port;
;   'port'                 - to listen on a TCP socket to all addresses
;                            (IPv6 and IPv4-mapped) on a specific port;
;   '/path/to/unix/socket' - to listen on a unix socket.
; Default Value: value of the listen option
;pm.status_listen = 127.0.0.1:9001

; The ping URI to call the monitoring page of FPM. If this value is not set, no
; URI will be recognized as a ping page. This could be used to test from outside
; that FPM is alive and responding, or to
; - create a graph of FPM availability (rrd or such);
; - remove a server from a group if it is not responding (load balancing);
; - trigger alerts for the operating team (24/7).
; Note: The value must start with a leading slash (/). The value can be
;       anything, but it may not be a good idea to use the .php extension or it
;       may conflict with a real PHP file.
; Default Value: not set
;ping.path = /ping

; This directive may be used to customize the response of a ping request. The
; response is formatted as text/plain with a 200 response code.
; Default Value: pong
;ping.response = pong

; The access log file
; Default: not set
;access.log = log/$pool.access.log

; The access log format.
; The following syntax is allowed
;  %%: the '%' character
;  %C: %CPU used by the request
;      it can accept the following format:
;      - %{user}C for user CPU only
;      - %{system}C for system CPU only
;      - %{total}C  for user + system CPU (default)
;  %d: time taken to serve the request
;      it can accept the following format:
;      - %{seconds}d (default)
;      - %{milliseconds}d
;      - %{milli}d
;      - %{microseconds}d
;      - %{micro}d
;  %e: an environment variable (same as $_ENV or $_SERVER)
;      it must be associated with embraces to specify the name of the env
;      variable. Some examples:
;      - server specifics like: %{REQUEST_METHOD}e or %{SERVER_PROTOCOL}e
;      - HTTP headers like: %{HTTP_HOST}e or %{HTTP_USER_AGENT}e
;  %f: script filename
;  %l: content-length of the request (for POST request only)
;  %m: request method
;  %M: peak of memory allocated by PHP
;      it can accept the following format:
;      - %{bytes}M (default)
;      - %{kilobytes}M
;      - %{kilo}M
;      - %{megabytes}M
;      - %{mega}M
;  %n: pool name
;  %o: output header
;      it must be associated with embraces to specify the name of the header:
;      - %{Content-Type}o
;      - %{X-Powered-By}o
;      - %{Transfert-Encoding}o
;      - ....
;  %p: PID of the child that serviced the request
;  %P: PID of the parent of the child that serviced the request
;  %q: the query string
;  %Q: the '?' character if query string exists
;  %r: the request URI (without the query string, see %q and %Q)
;  %R: remote IP address
;  %s: status (response code)
;  %t: server time the request was received
;      it can accept a strftime(3) format:
;      %d/%b/%Y:%H:%M:%S %z (default)
;      The strftime(3) format must be encapsulated in a %{<strftime_format>}t tag
;      e.g. for a ISO8601 formatted timestring, use: %{%Y-%m-%dT%H:%M:%S%z}t
;  %T: time the log has been written (the request has finished)
;      it can accept a strftime(3) format:
;      %d/%b/%Y:%H:%M:%S %z (default)
;      The strftime(3) format must be encapsulated in a %{<strftime_format>}t tag
;      e.g. for a ISO8601 formatted timestring, use: %{%Y-%m-%dT%H:%M:%S%z}t
;  %u: remote user
;
; Default: "%R - %u %t \"%m %r\" %s"
;access.format = "%R - %u %t \"%m %r%Q%q\" %s %f %{milli}d %{kilo}M %C%%"

; The log file for slow requests
; Default Value: not set
; Note: slowlog is mandatory if request_slowlog_timeout is set
;slowlog = log/$pool.log.slow

; The timeout for serving a single request after which a PHP backtrace will be
; dumped to the 'slowlog' file. A value of '0s' means 'off'.
; Available units: s(econds)(default), m(inutes), h(ours), or d(ays)
; Default Value: 0
;request_slowlog_timeout = 0

; Depth of slow log stack trace.
; Default Value: 20
;request_slowlog_trace_depth = 20

; The timeout for serving a single request after which the worker process will
; be killed. This option should be used when the 'max_execution_time' ini option
; does not stop script execution for some reason. A value of '0' means 'off'.
; Available units: s(econds)(default), m(inutes), h(ours), or d(ays)
; Default Value: 0
;request_terminate_timeout = 0

; The timeout set by 'request_terminate_timeout' ini option is not engaged after
; application calls 'fastcgi_finish_request' or when application has finished and
; shutdown functions are being called (registered via register_shutdown_function).
; This option will enable timeout limit to be applied unconditionally
; even in such cases.
; Default Value: no
;request_terminate_timeout_track_finished = no

; Set open file descriptor rlimit.
; Default Value: system defined value
;rlimit_files = 1024

; Set max core size rlimit.
; Possible Values: 'unlimited' or an integer greater or equal to 0
; Default Value: system defined value
;rlimit_core = 0

; Chroot to this directory at the start. This value must be defined as an
; absolute path. When this value is not set, chroot is not used.
; Note: you can prefix with '$prefix' to chroot to the pool prefix or one
; of its subdirectories. If the pool prefix is not set, the global prefix
; will be used instead.
; Note: chrooting is a great security feature and should be used whenever
;       possible. However, all PHP paths will be relative to the chroot
;       (error_log, sessions.save_path, ...).
; Default Value: not set
;chroot =

; Chdir to this directory at the start.
; Note: relative path can be used.
; Default Value: current directory or / when chroot
;chdir = /var/www

; Redirect worker stdout and stderr into main error log. If not set, stdout and
; stderr will be redirected to /dev/null according to FastCGI specs.
; Note: on highloaded environment, this can cause some delay in the page
; process time (several ms).
; Default Value: no
;catch_workers_output = yes

; Decorate worker output with prefix and suffix containing information about
; the child that writes to the log and if stdout or stderr is used as well as
; log level and time. This options is used only if catch_workers_output is yes.
; Settings to "no" will output data as written to the stdout or stderr.
; Default value: yes
;decorate_workers_output = no

; Clear environment in FPM workers
; Prevents arbitrary environment variables from reaching FPM worker processes
; by clearing the environment in workers before env vars specified in this
; pool configuration are added.
; Setting to "no" will make all environment variables available to PHP code
; via getenv(), $_ENV and $_SERVER.
; Default Value: yes
;clear_env = no

; Limits the extensions of the main script FPM will allow to parse. This can
; prevent configuration mistakes on the web server side. You should only limit
; FPM to .php extensions to prevent malicious users to use other extensions to
; execute php code.
; Note: set an empty value to allow all extensions.
; Default Value: .php
;security.limit_extensions = .php .php3 .php4 .php5 .php7

; Pass environment variables like LD_LIBRARY_PATH. All $VARIABLEs are taken from
; the current environment.
; Default Value: clean env
;env[HOSTNAME] = $HOSTNAME
;env[PATH] = /usr/local/bin:/usr/bin:/bin
;env[TMP] = /tmp
;env[TMPDIR] = /tmp
;env[TEMP] = /tmp

; Additional php.ini defines, specific to this pool of workers. These settings
; overwrite the values previously defined in the php.ini. The directives are the
; same as the PHP SAPI:
;   php_value/php_flag             - you can set classic ini defines which can
;                                    be overwritten from PHP call 'ini_set'.
;   php_admin_value/php_admin_flag - these directives won't be overwritten by
;                                     PHP call 'ini_set'
; For php_*flag, valid values are on, off, 1, 0, true, false, yes or no.

; Defining 'extension' will load the corresponding shared extension from
; extension_dir. Defining 'disable_functions' or 'disable_classes' will not
; overwrite previously defined php.ini values, but will append the new value
; instead.

; Note: path INI options can be relative and will be expanded with the prefix
; (pool, global or /usr)

; Default Value: nothing is defined by default except the values in php.ini and
;                specified at startup with the -d argument
;php_admin_value[sendmail_path] = /usr/sbin/sendmail -t -i -f www@my.domain.com
;php_flag[display_errors] = off
;php_admin_value[error_log] = /var/log/fpm-php.www.log
;php_admin_flag[log_errors] = on
;php_admin_value[memory_limit] = 32M
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ ls -l /etc/nginx/
total 64
drwxr-xr-x 2 root root 4096 Nov 10  2022 conf.d
-rw-r--r-- 1 root root 1125 Jul 27  2022 fastcgi.conf
-rw-r--r-- 1 root root 1055 Jul 27  2022 fastcgi_params
-rw-r--r-- 1 root root 2837 Jul 27  2022 koi-utf
-rw-r--r-- 1 root root 2223 Jul 27  2022 koi-win
-rw-r--r-- 1 root root 3957 Aug  2  2022 mime.types
drwxr-xr-x 2 root root 4096 Nov 10  2022 modules-available
drwxr-xr-x 2 root root 4096 Jun 20 04:28 modules-enabled
-rw-r--r-- 1 root root 1447 Jul 27  2022 nginx.conf
-rw-r--r-- 1 root root  180 Jul 27  2022 proxy_params
-rw-r--r-- 1 root root  636 Jul 27  2022 scgi_params
drwxr-xr-x 2 root root 4096 Jun 20 04:28 sites-available
drwxr-xr-x 2 root root 4096 Jun 20 04:28 sites-enabled
drwxr-xr-x 2 root root 4096 Jun 20 04:28 snippets
-rw-r--r-- 1 root root  664 Jul 27  2022 uwsgi_params
-rw-r--r-- 1 root root 3071 Jul 27  2022 win-utf
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ ls -l /etc/nginx/snippets/
total 8
-rw-r--r-- 1 root root 423 Jul 27  2022 fastcgi-php.conf
-rw-r--r-- 1 root root 217 Jul 27  2022 snakeoil.conf
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$ cat /etc/nginx/snippets/fastcgi-php.conf
# regex to split $uri to $fastcgi_script_name and $fastcgi_path
fastcgi_split_path_info ^(.+?\.php)(/.*)$;

# Check that the PHP script exists before passing it
try_files $fastcgi_script_name =404;

# Bypass the fact that try_files resets $fastcgi_path_info
# see: http://trac.nginx.org/nginx/ticket/321
set $path_info $fastcgi_path_info;
fastcgi_param PATH_INFO $path_info;

fastcgi_index index.php;
include fastcgi.conf;
lex@gblex:~$
lex@gblex:~$
lex@gblex:~$
